<script src="https://player.vimeo.com/api/player.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.SC-Video_icon').forEach(function(playIcon) {
    var container = playIcon.closest('.SC-Video_wrapper').querySelector('[data-video-container]');
    var iframe = playIcon.closest('.SC-Video_wrapper').querySelector('[data-video-iframe]');
    var player = new Vimeo.Player(iframe);

    function requestFullscreen(element) {
      if (element.requestFullscreen) {
        return element.requestFullscreen();
      } else if (element.mozRequestFullScreen) {
        return element.mozRequestFullScreen();
      } else if (element.webkitRequestFullscreen) {
        return element.webkitRequestFullscreen();
      } else if (element.msRequestFullscreen) {
        return element.msRequestFullscreen();
      }
      return Promise.reject(new Error("Fullscreen API is not supported."));
    }

    function playVideoAndRequestFullscreen() {
      container.style.display = 'none';
      iframe.style.display = 'block';

      requestFullscreen(iframe).then(function() {
        player.play().catch(function(error) {
          console.error('Failed to play the video:', error);
          container.style.display = 'block';
          iframe.style.display = 'none';
        });
      }).catch(function(error) {
        console.error('Failed to enter fullscreen:', error);
      });
    }

    playIcon.addEventListener('click', playVideoAndRequestFullscreen);
  });
});
</script>